from collections import defaultdict, deque, Counter
# d = deque()
# d.append(5)
# x = d.popleft()
import re
# m = re.match(r"(\w+) (\w+)", "Isaac Newton, physicist") 
# # or re.search
# >>> m.group(0)       # The entire match
# 'Isaac Newton'
# >>> m.group(1)       # The first parenthesized subgroup.
# 'Isaac'
# >>> m.group(2)       # The second parenthesized subgroup.
# 'Newton'
# >>> m.group(1, 2)    # Multiple arguments give us a tuple.
# ('Isaac', 'Newton')
from heapq import heappush, heappop
# >>> heap = []
# >>> data = [1, 3, 5, 7, 9, 2, 4, 6, 8, 0]
# >>> for item in data:
# ...     heappush(heap, item)
# heap[0] is the smallest item
import string
# string.ascii_lowercase == 'abcde...'
# string.ascii_uppercase == 'ABCDE...'
from functools import lru_cache
# @lru_cache(maxsize=None)

import sys

sys.setrecursionlimit(100000)

def get_ints(s):
    return list(map(int, re.findall(r"-?\d+", s)))  # copied from mcpower from mserrano on betaveros' recommendation
def get_nonints(s):
    return list(re.findall(r"-?[RL]+", s))
dirs = [(0,1), (1,0), (0,-1), (-1,0)]
directions = 'RDLU'
octs = [(0,1),(1,1),(1,0),(1,-1),(0,-1),(-1,-1),(-1,0),(-1,1)]
def is_grid_valid(n,m, r,c,):
    return (0<=r<n) and (0<=c<m)
def sign_of(x):
    if x==0:
        return 0
    return x/abs(x)

def get_zone(r,c):
    return 3 * (r//50) + c//50


transition_map = {
    1: {'U': (9, 'R'), 'L': (6, 'R')},
    2: {'U': (9, 'U'), 'R': (7, 'L'), 'D':(4, 'L')},
    4: {'L': (6, 'D'), 'R': (2, 'U')},
    6: {'L': (1, 'R'), 'U': (4, 'R')},
    7: {'D': (9, 'L'), 'R': (2, 'L')},
    9: {'L': (1, 'D'), 'D': (2, 'D'), 'R': (7, 'U')},
}
def transition(zone, r,c, direction):
    print(zone, r,c, direction)
    internal_r, internal_c = r%50, c%50
    zone_to, new_direction = transition_map[zone][direction]
    pertinent_coord = internal_r if direction in 'LR' else internal_c
    if new_direction == 'U':
        new_internal_r, new_internal_c = 49, pertinent_coord
    elif new_direction=='D':
        new_internal_r, new_internal_c = 0, pertinent_coord
    elif new_direction=='L':
        new_internal_r, new_internal_c = pertinent_coord, 49
    else:
        new_internal_r, new_internal_c = pertinent_coord, 0
    row = 50 * (zone_to//3)
    col = 50 * (zone_to%3)
    return row + new_internal_r, col + new_internal_c, new_direction


    

if True:
    instructions = "15L7L22L33R40L46L23R27R1L25L6L47R30L33R18L40L5L33R37L19R15R12R14L38R33L24L36R27R22L48L14L3R10R42L42L37L14L22R46R37L46R36L29R17R17L12R28L50L44R45R23L18L13R34L32L16L21R50R44L15L10L41L8L1L36R16R13R43L48L17R48L39R33R40L15L33L3R24R34R39L24L2L43R18L19L26R19R34R21R19R1L45L38R21R4L8R2R22L35L11R9R30L1R9L16R13L20R20R50L42L8L48L47R24L2L28R31R48R15R13R21R40L15L3L20R36L40R39R47L43L25L8L39R48R35R18L2R11L9R29R1R9R5R31L18L50L43R12R31L39L27R1R26L31L32L36L46L46L8L31L17R15R27R19L1L33R36L45L13L29L45L8R4L25R39R27R38R2L7L21R39L5L34L41R33L34L33R23R19L19R42R18R14R39R37R27R35L14L6L6R16L27L41L27R50L50L27R37L50R10L14R18L24L26L4R7R10R46R37R11R45L34R15L21R5L22L33L2L36L50R36R46R2R13L17L23R28R14R33R26L12R2L1R28R40R20R25R1R36L11L25R18L45L1L39L47R43L14L26R2L38L49L46R39L42L42R31L6R32L41L40R21R16L4L27L47R10L21R45R16L11L26L15L38R22L43L46L49R47R20R15L37L8R5L29L11L42L30R12L27L41L37L20R36L36R7R40L9L38L16R31R2R21L3R11R21L41R37L11R8R5R21R14L49L11L39L12R11R26R21L14L5L9R40L28L50R23L37R2R20R19L3R29R6R19L2L6L5L27R23R3L15R26R3L33L48R31R16R34L9L13L26R25R22R9L32R49R6L26L50L32R7R20R4L50L18L19R23L2R18R23R19L42R26L16L2R24L16R4R9L27L42L24L21L44L29L3R13R16L11R14L31R7L25R23R40R12L32L1L9L42L37L3L3R19R21R7L16R46R21R21R36L17L38R41R8L19R12L17L40L36R12L23L5L32L24L27L27L41L13R28R12R3R13R12R9R28R30L10R20R29L45R32L10L36R38R29R37L44L20L24L22R28L24R49L18L13L38R15L23L39L40L29L27R1L8R6L28L13L26R14L1R15L20L23L40L41R40L27R41L26L13R1R40R24L22R20R23L1L27L35R48L18R45L38R27L14R42R10L32L23R18R17R2L2L36L48R10R6L5L44R36L6L15L40L12L35R4L23R30R42L35L36R9L37R30L5R22L7L7R39R1R36L18L4L31R4R49R31L12L16L17R23L30R1R26L22R40L27L4R40R22R48R13R29R39R10L34L9R25L33L37L27L16L41L18R42L27R22R12R21L37R29R17R12R49L48L13L9L2L7L29R3L31R20L3R48L5L21L22R40R30R33R48L25L19L30R24L45R49R30R14R21L40L2L42L4R17L22L42L43R18R32R48R8L27R40R28R31L19L6L28L45L7R8L37L5R27R11R8R37R15L22R32R16L9R22L27L38L10R9R40R7L23R14L3L46L17R28R8R13L16L44R19R30R2R50R40L32L16R24L22L43L12R19L44R26R50L11R25L3R13R43R9R4R7R5R24L35L9L50R25R26R45L11R14L26L7L36R8R45L11R26L24L30L16L42L6R15R33L29L31R22L44R6R11L47R9R29L16L30L43L5L9L20L23R50L22L28L38R31R45L2R48R36L11R18L25L50L46R11L48L7L27L30R41L43R2L3R36R40R48L35R23L9L32L39L49L46L34L29R28R13L3L37R34L43R27R2L50R32L9L46R34L23R33R31L7L32L45R13R33L30L14R30L23L50L17R12L31R23L40R29R29R1R47L29R36R27R19R32L31L16L27L1R6R9R24R3L23L28R25L16L21R10L48L12L47L5L12R9R29R46L46L5R32R44L26R34R17L40R18L13R46L47R43L13R5L7L9L26L22L9L29R35R49L48L10R44L10R19R17L8R4L41L11R39R44L38L13R31L50R2R23R11L2L17R3L5L4R43R21L20L21L37R38L30R2L20L25L27R22R41R34R20R36L20L44R11L32R36R48R27R29R11R1L28L28R9R5L16R36L15L20R41R23L38L33L11R29L23L46R19R43R32R24L36R2R28R11R5L23R30L8R29L5L10R6L28L28R15L16L49R19R41L13R44R25R36R13R15L30R6R18R32R42R29L29L26L16L45L14L29L27R50L21R24R25L22R46L44R8R50R48L32L9L16R28L7L42L5R22L40R4L3L12R29R29R22L4R6L28L2R20R41L11L17L10R26L42L46L28R25R3R40L46R43R10R44R7L19L42L28L47R3R12L40R19L42R39L47R11L23L45L18L7L48L45R11R38L28R32R13R3R17R25R17R45L42L37R14R9L28L46L27L20L44R1L46R6R49R37R37R32L37L6R31R33L6L1L2L22L28L25R5L35R40L17R32R27L18R12R6R26R4R35L47L35L13R42R29R37R13R28R39R35L33L23L12L46R40R27L48R3R8L45L43R19L38R29R23R5R3L50R47R15R11R27L7L29R47L32L21L1R36L35L41L11L32R31L29L29L26R20L46R38L27L23R29L26R36L44R1R8R42L25L40L32L47L12R13R24R29L50R20L11L20L40R15R16L25L8R26R42R33L22L4R42L32L8L2R49L11L27R48L35R29R36L44R43R41L45L34L34R49R36R12R6R1L31R17L34L9R49R16R32L27L21L23R6R22L4R12L17R26L31R25R20R5L47L26L34R13L16R36R32R28R30R44L25R31L17L5R41L46L9L34L10R42L20R36R16R38R9R3L22L26R17R43L7R18R29L22R44R4L12R35L28L7L16L16L33L37L7R16L47L23R3R9L27L7R19R20L43R49R22R3R3R48R37L1L41L43L21L8R4L8R12L11R13R50R39L28L21L33L45L8R33R41R23R39R31R42R48L11R38R16L15R38R2R39L29L29R18R24R1L39R41R21R31L29L15R5L26R48L8R48R14L11R15L45R16L34R19R13L33R39L47L6R8R1L23R44R24L49L5R13R19R46R43R6L31R28R17R32L29R38R14R15L48L46L13R37L23R23L17R48L2R17R33L29R16L32L8L49L15L49R8L38R45L48L39R16L41L23R35R39R15R40L39R23L8L49L35R37L35R19L6R20L23L50R14L29R5L15L25R37R42R12L21R19L31L21R41R29R50R16R10R33L40L33R8L34L24L15R20R16R3L1R25R37L41R5R8R44R8R38R20L19R35R19L21L11L23L42L44L49R49L19L17L35R12L43L26R11L41R49L50L31R19L2R32L4L32R40R49R22R10L9L28L5R22L5R36L43R7R31R45R19R42R47L30L5L37R21R3L3L37L34L19L39R8L19R21L31L23R49L10L6L37L44R1L10R50L33L21L35L46L15R22L42R23R13L3L31L16R31R28R3L47R8L15L3R26L27R12R22L19R17R34R29R14L7R41L8L14R24L48L17R44R49R21R19L7R42L10R27R2R4R19L9R3R2R17R29L30L9L44L15L46L40R42L16R35L22L6R4L7L9L5L15L18R5L16R50R31R46L5L2L35R48R26L3R33L48R6R1R3L50R38L37R5L8L38R13R39R42L19L17R24L37L18L1R27L18R19R45R13L14R35L28L19R32R2L41L29R43L29L41L45L39L19L23R38R44R32R7R10L32R46L29L32R46R18L48L24R49R12R45R27L8L23L37R27L15R35R7R18R23R41L21L26R39R48R45R8R15R31R33R28R12R34L39R5L47L39R10R14L8R36L15R37L28R9R13R14R7R42R23L6R11R40R43L2L15L23L7L42L48R37R20R38L19L8R38R16L23L16R50L22R37R47R37L45R37R7L14R38R26R24L30L23R15L38R33R39L26L36R49L33R14L4L19L33L24R37R42R46R35L48R42R30R14L30R27R3R48L20L41R48L31R36L30R44L44R19L41R10R31R47L17L9L18R17R31R46R19R9R35R5R49R30R30R24L9R28R4R34L23R23R29R38R4R22R33L8L39R33L10L41L5L19L40R11R7L26R1L6L6R20R34L11R14L38L1R2R10L35R32L20R38L2R50R2L10L3R25R13L11L34L4L31R22R14L28L36R42L44L28R6R10R20L2R40L17L32R20L45L9L47L16R48L6R14R21L14R2R39R45L12R44L43R1R27R41R2L21L39R24L10R32L35L48L33L39R28L33L24R26L2L50R27R14R23R16R50R36L15R4R46L27L31R14L16R45L17R16R37L14L3L41R15R37R22R11R24R23L45R5R48L47L35L38R38R13L37R31L19R48L9L49L27R48L43L14R29L12L28L13L38R33R16R24L32L17R38R11L46R23L27R25L7R18R31R16R32L14L10R4L35R27L29L30L17R45R5L45L22R42R48R36R38L29L15R13R21L49R20R36L33R14R18L29L20L17L21L1R1L32R33L50L30R16L8R12L42L44R14R20L10L27L47R22L45R34R38L45R37L39R47L25L15R20L31R11L38R14R14L27R47L8R32R33R15L11L21R12R34R47R17R29L1R18L23R48R11L28R41R39R6L47L36L45L48R49L16R41L22R32R45R13L8R32L41R19L14L1L30R37L14R39"
    # instructions = "10R5L5R10L4R5L5"
    ans = 0
    inps = []
    while True:
        try:
            inps.append(input())
        except EOFError:
            break
    R = len(inps)
    C = max(len(inp) for inp in inps)
    inps = [inp.ljust(C) for inp in inps]
    r,c = (0, inps[0].index('.'))
    ints = get_ints(instructions)
    turns = get_nonints(instructions) + [None]
    # print(list(zip(ints, turns)))
    direction = 'R'
    for x, turn in zip(ints, turns):
        # print(x, turn)
        for i in range(x):
            dr,dc = dirs[directions.index(direction)]
            zone = get_zone(r,c)
            print(r,c,zone)
            nr,nc = (r+dr), (c+dc)
            if (not is_grid_valid(R,C, nr,nc)) or inps[nr][nc] == ' ':
                print(direction, dr,dc)
                nr, nc, direction = transition(zone, r, c, direction)
                        
            # # symbol = inps[r][c]
            # while inps[nr][nc]==' ':
            #     nr,nc = (nr+dr)%R, (nc+dc)%C
            if inps[nr][nc] == '#':
                break
            else:
                r,c = nr,nc
            print(r,c, direction)
        if turn is not None:
            direction = directions[(directions.index(direction) + (1 if turn=='R' else -1))%4]
        print(direction)
    r += 1
    c += 1
    print(direction)
    ans = r * 1000 + 4 * c + directions.index(direction)
    

    print(ans)
else:
    pass